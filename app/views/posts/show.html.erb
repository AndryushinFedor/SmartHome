<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @post.tags %>
</p>

<%= image_tag(@post.image.url, alt: 'Image') if @post.image? %>


<%= link_to(image_tag(@post.image.thumb.url, alt: 'Image'), @post.image.url, target: '_blank') if @post.image? %>

<p>
	<strong>Author:</strong>
	<%= @post.user_id %>
</p>

<p>
  <strong>Title:</strong>
  <%= @post.title %>
</p>

<p>
  <strong>Category:</strong>
  <%= @post.category.name %>
</p>

<p>
  <strong>Content:</strong>
  <%= raw @post.content %>
</p>
<p>Devices:</p>
<% @post.devices.each do |device| %>
  <p>

    <strong>Device Title:</strong>
    <%= device.title %>
  </p>  

  <%= image_tag(device.image.url, alt: 'Image') if device.image? %>
<% end %>


<% if user_signed_in? %>
  <%= render partial: 'common/votes', locals: { resource: @post } %>
<% end %>

<p><%= @post.favorites.count %> <%= (@post.favorites.count) == 1 ? 'Favorite' : 'Favorites'%></p>
<hr/>
<% if user_signed_in? %>

  <% pre_favorite = @post.favorites.find { |favorite| favorite.user_id == current_user.id} %>
    <% if pre_favorite %>
        <%= button_to 'Remove from Favorite', post_favorite_path(@post, pre_favorite), method: :delete %>
    <% else %>
        <%= button_to 'Add to Favorite', post_favorites_path(@post), method: :post %>
  <% end %>
<% end %>

<% if user_signed_in? %>
<%= link_to 'Edit', edit_post_path(@post) %> |
<% end %>
<%= link_to 'Back', posts_path %>

<h2>Comments</h2>
<%= render @post.comments %>



<% if user_signed_in? %>
	<% if current_user.banned? %>
		You are banned and you can't post a comment for now.
	<% else %>
		<%= render partial: "comments/form", locals: { resource: @post } %>
	<% end %>
<% else %>
  <p>Please <%= link_to 'login', new_user_session_path %> or <%= link_to 'register', new_user_registration_path %> to comment.</p>
<% end %>
